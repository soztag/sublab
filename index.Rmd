--- 
title: "Sublab: A QWrks-Study of the Subjectivity on the Future of Labor"
description: "Sichtweisen auf gegenwärtige und zukünftige Arbeitswelten"
author: "Sabine Pfeiffer, Sandra Kawalec, Maximilian Held"
date: '`r Sys.Date()`'
biblatex: yes
bibliography: held_library.bib
biblio-style: authoryear
documentclass: book
geometry: margin=4.5cm
github-repo: QWrks/sublab
link-citations: yes
site: bookdown::bookdown_site
always_allow_html: yes
---
  
# Concourse

```{r setup, cache = FALSE, include = FALSE}
source("setup.R")
```

```{r concourse}
concourse <- readxl::read_xlsx(path = "concourse.xlsx", sheet = 1)
```


```{r make-cards, include = FALSE, eval = FALSE}
source("rendercards.R")
```

### Studienanleitung (Condition of Instruction)

Vielen Dank, dass Sie an unserer Studie über die Subjektivität zur Arbeit teilnehmen.

<!-- Bitte klicken Sie auf den "Fortsetzen"-Button. -->

Stellen Sie sich vor, Sie treffen sich in einige Jahre nach ihrem Abschluss erneut mit ihren Kommilitoninnen und Kommilitonen.
Sie kommen ins Gespräch, und reflektieren über ihre zukünftige Arbeit.

Bitte beantworten Sie uns in dieser fiktiven Situation **zwei Fragen**, in dieser Reihenfolge:

- a) Was *möchten* Sie dann über ihre Arbeit sagen können, also wie *soll* ihre Arbeit der Zukunft aussehen?
- b) Was *werden* Sie *wahrscheinlich* über ihre Arbeit sagen können, also wie *wird* ihre Arbeit der Zukunft aussehen?

Sortieren Sie die folgenden Aussagen danach, wie sehr auf ihre fiktive zukünftive Einschätzung ihrer Arbeit zutreffen.


<!-- Bitte gehen Sie dabei wie folgt vor: -->

<!-- 1. Lesen Sie alle Karten einmal durch. -->
<!-- 2. Sortieren Sie die Karten grob in drei Kategorien. -->
<!-- 	Die Kategorien müssen *nicht* gleich groß sein. -->
<!-- 	1. Karten, dessen Inhalt Sie eher für unzutreffend halten, legen Sie auf einem Stapel rechts von der Schablone ab. -->
<!-- 	2. Karten, dessen Inhalt Sie eher für zutreffend halten, legen Sie auf einen Stapel links von der Schablone ab. -->
<!-- 	3. Karten, dessen Inhalt Sie neutral gegenüberstehen, widersprüchliche Reaktionen haben oder die Sie nicht verstehen legen Sie vor Ihnen über der Schablone ab. -->
<!-- 3. Konzentrieren Sie sich auf die Karten aus Kategorie **a**.  -->
<!-- 	Sortieren Sie die Karten nach dem Grad ihrer Zustimmung. -->
<!-- 	Beginnen Sie mit den Karten, denen Sie am meisten zustimmen und belegen Sie entsprechend die Felder vom rechten Rand der Schablone ausgehend. -->
<!-- 4. Wenn Sie mit den Karten der Kategorie **a** fertig sind, tragen Sie die Umrisse der ausgefüllten Felder in die beiliegende Tabelle ein. -->
<!-- 5. Machen Sie mit den Karten aus Kategorie **b** weiter. -->
<!-- 	Verfahren Sie wie in Schritt 3; beginnend mit den Karten deren Inhalt Sie am meisten ablehnen. -->
<!-- 	Belegen Sie mit diesen die Felder ausgehend vom linken Rand der Schablone. -->
<!-- 6. Tragen Sie erneut die entstandenen Umrisse in die beiliegende Tabelle ein. -->
<!-- 7. Verteilen Sie die verbleibenden Karten aus Kategorie **c** auf die leeren Felder entsprechend Ihrem Grad der Zustimmung. -->
<!-- 8. Kontrollieren Sie noch einmal die Verteilung aller Karten und nehmen Sie bei Bedarf Änderungen vor. -->
<!-- 9. Notieren Sie die Position der Karten anhand der Kennungen (etwa: `C21`) in der beiligenden Tabelle und benachrichtigen Sie den Umfrageleiter. -->


Bitte beachten Sie dabei:

- Es gibt *keine richtigen oder falschen Sortierungen*.
	Ihre subjektive Einstellung und Interpretation zu den Aussagen auf den Karten zählt.
- Wenn Sie ein Item nicht verstehen, es Ihnen sinnlos erscheint oder Sie der Aussage ambivalent gegenüber stehen, sortieren Sie *zwischen* ihre positiven (zutreffenden) und negativen (nicht zutreffenden) Items oder über den Nullpunkt in der Mitte.
  In beiden Fällen werden wir Ihre Sortierung entsprechend in der Analyse berücksichtigen.
  Auch wenn Sie zu einem Item *keine* klare Einstellung haben, ist das für uns eine wichtige Information und Ausdruck Ihrer legitimen Subjektivität.
- Der Nullpunkt auf der Schablone ist bedeutungslos.
	Der Wert **–1** muss etwa nicht heißen, dass Sie einer dort gelegten Karte widersprechen; es deutet lediglich an, dass sie einer dort gelegten Karte *weniger* zustimmen als einer bei **0** gelegten Karte.
	Nur *relative* Positionen der Karten zählen.
- Nur die horizontale Position (von links nach rechts) der Karten ist bedeutsam.
	Die vertikale Position (von oben oder unten) innerhalb einer Spalte sagt nichts aus.
- Alle Karten müssen gelegt werden, und alle Felder belegt.
- Notieren Sie sich jederzeit Anmerkungen oder Ergänzungen zu den einzelnen Karten, auf dem separaten Feedback-Bogen.
- Sie können unten stehend auch eigene Aussagen für zukünftige Q-Sortierungen vorschlagen.
	Diese neuen Karten können Sie allerdings dieses Mal noch nicht in der Sortierung berücksichtigen.

Bitte gehen Sie nun auf die Website **`http://labouratory.de/qsort`** um an der Erhebung teilzunehmen.

\newpage

## Eigene Vorschläge für Items


### Durchgang A Positiv

Bitte nennen Sie uns ein fehlendes Item, dass Sie für *wünschenswert* gehalten hätten.
(Also ein Item, das im Durchgang a) ganz rechts gelegen hätte).

\vspace{70pt}

### Durchgang A Negativ

Bitte nennen Sie uns ein fehlendes Item, dass Sie für *nicht wünschenswert* gehalten hätten.
(Also ein Item, das im Durchgang a) ganz links gelegen hätte).

\vspace{70pt}

### Durchgang B Positiv

Bitte nennen Sie uns ein fehlendes Item, dass Sie für *wahrscheinlich* gehalten hätten.
(Also ein Item, das im Durchgang b) ganz rechts gelegen hätte).

\vspace{70pt}

### Durchgang B Negativ

Bitte nennen Sie uns ein fehlendes Item, dass Sie für *nicht wahrscheinlich* gehalten hätten.
(Also ein Item, das im Durchgang b) ganz links gelegen hätte).

\vspace{70pt}

## Data Import

```{r data-import}
rawdat <- NULL
rawdat$students16 <- read.csv(file = "raw/2016-07-Students.csv",
                              header = TRUE,
                              sep = ";",
                              na.strings = "",
                              stringsAsFactors = FALSE)
rawdat$zaw16 <- read.csv(file = "raw/2016-09-ZAW40.csv",
                         header = TRUE,
                         sep = ";",
                         na.strings = "",
                         stringsAsFactors = FALSE)

# always first students16, then zaw16
group <- c(rep("students16", nrow(rawdat$students16)),
           rep("zaw16", nrow(rawdat$zaw16)))
userid <- c(rawdat$students16$form3, rawdat$zaw16$form1)
gender <- c(rawdat$students16$form0, rawdat$zaw16$form0)
gender <- factor(x = gender,
                 levels = c(0:2),
                 labels = c("male", "female", "other"),
                 exclude = 3)
agegroup <- c(rawdat$students16$form1, rep(NA, nrow(rawdat$zaw16)))
agegroup <- ordered(x = agegroup,
                    levels = c(0:4),
                    exclude = 5,
                    labels = c("younger than 16", "17 to 18", "19 to 21", "22 to 24", "24 or older"))

# colnames(rawdat$students16)[colnames(rawdat$students16) == "form2"] <- "condition"
condition <- c(rawdat$students16$form2, rep(0, nrow(rawdat$zaw16)))  # zaw16 only did "desirable"
condition <- factor(x = condition,
                     levels = c(0:1),
                     labels = c("desirable", "probable"))
condition <- as.character(condition)

# fix time
datetime <- strptime(x = c(rawdat$students16$datetime, rawdat$zaw16$datetime), format = "%Y-%m-%d %H:%M:%S", tz = "CET")

# fix durations
durations <- rbind(rawdat$students16[, c("dur0", "dur1", "dur2", "dur3", "dur4", "dur5")],
                   rawdat$zaw16[, c("dur0", "dur1", "dur2", "dur3", "dur4", "dur5")])
colnames(durations) <- c("dur_info", "dur_roughsort", "dur_mainsort", "dur_checksort", "dur_extstat", "dur_survey")
durations <- durations/60  # make this into minutes

# comments
comments_neg <- c(rawdat$students16$comment18, rawdat$zaw16$comment6)
comments_pos <- c(rawdat$students16$comment8, rawdat$zaw16$comment35)

# fix q data ==========
# let's first get the statements and give them proper handles
# library(XML)
# qset <- xmlParse(file = "tool/settings/statements.xml")
# qset <- xmlToList(node = qset, addAttributes = FALSE, simplify = TRUE)
# qset <- data.frame(item = unlist(qset), item_id = 1:length(qset))
# qset$item_handle <- NA
# write.csv(x = qset, file = "qset.csv")
qdata <- rbind(rawdat$students16[,3:43], rawdat$zaw16[,3:43])

concourse$id <- paste0("s", concourse$id)
checkmate::assert_set_equal(x = colnames(qdata), y = concourse$id)
colnames(qdata) <- concourse$handle

# now put everything in the right order and back in place ====
cleandat <- cbind(userid,
                  datetime,
                  agegroup,
                  gender,
                  group,
                  condition,
                  qdata,
                  durations,
                  comments_neg,
                  comments_pos,
                  deparse.level = 2,
                  stringsAsFactors = FALSE)

# kill early tests
cleandat <- cleandat[-c(1:3), ]
cleandat <- cleandat[cleandat$userid != "MartinTest", ]

# add peoplevars
peoplevars <- data.frame(userid = unique(cleandat$userid))
peoplevars <- cbind(peoplevars, cleandat[match(peoplevars$userid, cleandat$userid), c("agegroup", "gender", "group")])
peoplevars[peoplevars$userid == "Bernadette", "group"] <- "team"  # this was another team member.

# extract qdata
qdes <- cleandat[cleandat$condition == "desirable", concourse$handle]
rownames(qdes) <- cleandat[cleandat$condition == "desirable", "userid"]
qdes <- t(qdes)
qprob <- cleandat[cleandat$condition == "probable", concourse$handle]
rownames(qprob) <- cleandat[cleandat$condition == "probable", "userid"]
qprob <- t(qprob)
qres <- NULL
qres$desirable <- qdes
qres$probable <- qprob

comments <- sorts <- array(data = NA,
                           dim = c(nrow(qprob), nrow(peoplevars), 2),
                           dimnames = list(items = rownames(qprob), 
                                           people = peoplevars$userid,
                                           condition = c("desirable", "probable")))
for (c in names(qres)) {
  for (p in colnames(qres[[c]])) {
    for (i in rownames(qres[[c]])) {
      # easy part: the qsorts
      sorts[i, p, c] <- qres[[c]][i, p]
    }  
      # now for the comments
    for (v in c("comments_neg", "comments_pos")) {
      current_comment <- cleandat[cleandat$userid == p & cleandat$condition == c, v]  # get the full comment
      current_split <- stringr::str_split(string = current_comment, pattern = "[)][ ]", simplify = FALSE)[[1]]  # split it in statement id and actual text
      current_text <- current_split[2]
      current_id <- stringr::str_extract(string = current_split[1], pattern = "[s]\\d{1,2}")  # always takes the form of s22 etc
      current_handle <- as.character(concourse[concourse$id == current_id, "handle"])  # replace with handle
      comments[current_handle, p, c] <- current_text 
    }
  }
}

# add written feedback from 2016 students
# feedback template does not specify whether this is for desirable/doable, so we're assigning it to both
# this kind of feedback is *also* imported as github issues to improve the items; that's what it was about, but we'll include it here, too, because it can be substantively interesting.
comments["live-2-work", "7", ] <- "Interpretationsproblem: Lebt man nur um zu arbeiten, oder ist Arbeit Teil meines Lebens?"
comments["own-boss", "9", ] <- "bezogen auf die Arbeit oder mein Leben?"

# cleanup
rm(list = ls()[!(ls() %in% c("peoplevars", "comments", "concourse", "sorts"))])
```
